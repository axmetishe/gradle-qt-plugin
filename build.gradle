plugins {
  id 'groovy'
  id 'groovy-gradle-plugin'
  id 'maven-publish'
  id 'com.gradle.plugin-publish' version '0.12.0'
  id 'com.github.hierynomus.license' version '0.15.0'
  id "org.sonarqube" version "3.1.1"
}

repositories {
  mavenCentral()
  jcenter()
}

publishing {
  repositories {
    mavenLocal()
  }
}

wrapper {
  distributionType = Wrapper.DistributionType.ALL
  gradleVersion = '6.7.1'
}

group = 'org.platops.gradle.plugins.qt'
version = '0.0.1-SNAPSHOT'
description = 'Generate QT resources and add to sourceSet'

ext {
  javaVersion = 11
  groovyVersion = '3.0.7'
}

license {
  ignoreFailures = true
  header = file('LICENSE.txt')

  includes(['**/*.groovy'])
}

sonarqube {
  properties {
    property "sonar.projectKey", "axmetishe_gradle-qt-plugin"
  }
}

gradlePlugin {
  plugins {
    qtPlugin {
      id = 'org.platops.gradle.plugins.qt.gradle-qt-plugin'
      displayName = 'Gradle QT Plugin'
      implementationClass = 'org.platops.gradle.plugins.qt.QTPlugin'
    }
  }
}

pluginBundle {
  description = project.description
  tags = ['qt', 'qrc', 'moc', 'uic', 'rcc']
  website = 'https://github.com/axmetishe'
  vcsUrl = 'https://github.com/axmetishe/gradle-qt-plugin'

  mavenCoordinates {
    groupId = project.group
    artifactId = project.name
  }
}

dependencies {
  api gradleApi()
  implementation "org.codehaus.groovy:groovy:${project.ext.groovyVersion}"
}
